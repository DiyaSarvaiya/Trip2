@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@using System.Data;
@model DataTable;

<link rel="stylesheet" href="~/flight/css/bootstrap.min.css" />
<link rel="stylesheet" href="~/flight/css/style.css" />
<div class="bradcam_area breadcam_bg_1" style="background-image:url('../flight/flight-1.jpg')">
    <h3>Flight</h3>
</div>

<div style="height:60px" class="w-100 m-3 d-flex justify-content-center">
    @if (TempData["Flight_SuccessMessage"] != null)
    {
        <div class="alert alert-success h-100" role="alert">
            @TempData["Flight_SuccessMessage"]
        </div>
    }
    @if (TempData["Flight_Error"] != null)
    {
        <div class="alert alert-success h-100" role="alert">
            @TempData["Flight_Error"]
        </div>
    }
</div>

<form id="form1" method="post" asp-area="Flight" asp-controller="Flight" asp-action="SearchFlight">
    <div class="d-flex justify-content-center pt-0">
        <div class="booking-form w-75 mb-0 mt-5 shadow">
            <div class="form-header">
                <h1>Book Your Flight</h1>
            </div>

            <div class="form-group">
                <div class="form-checkbox">
                    <label for="roundtrip">
                        <input type="radio" id="roundtrip" name="Type" value="Round Trip">
                        <span></span>Roundtrip
                    </label>
                    <label for="one-way">
                        <input type="radio" id="one-way" name="Type" value="One Way" checked>
                        <span></span>One way
                    </label>
                    <label for="multi-city">
                        <input type="radio" id="multi-city" name="Type" value="Multi-City">
                        <span></span>Multi-City
                    </label>
                </div>

              
            </div>
            <div class="form-group col-md-12 p-0 m-0">
                @*  <input class="form-control" type="text" placeholder="FLYING FROM"> *@
                <select class="" style="" name="DepartureCity">
                    <option selected>Flying From</option>

                    <option value="Kachha">Kachha</option>
                    <option value="Delhi">Delhi</option>
                    <option value="Rajkot">Rajkot</option>
                    @* @foreach (var city in ViewBag.CityList)
                    {
                    <option value="@city.CityName">@city.CityName</option>
                    } *@
                </select>
                <span>
                @if (ViewBag.DepartureCityError != null)
                {
                    <h4 class="text-danger ml-3">
                        @ViewBag.DepartureCityError
                    </h4>
                }
                else
                {
                    <br />
                }
                </span>

            </div>
            <div class="form-group col-md-12 p-0 m-0">
                <select class="" style="" name="DestinationCity">
                    <option>Flying To</option>
                    <option value="Delhi">Delhi</option>
                    <option value="Kachha">Kachha</option>
                    <option value="Hyderabad">Hyderabad</option>
                    <option value="Chennai">Chennai</option>
                    @* @foreach (var city in ViewBag.CityList)
                    {
                    <option class="form-input" value="@city.CityName">@city.CityName</option>
                    } *@
                </select>
                <span>
                    @if (ViewBag.DestinationCityError != null)
                    {
                        <h4 class="text-danger ml-3">
                            @ViewBag.DestinationCityError
                        </h4>
                    }
                    else
                    {
                      <br />
                    }
                </span>
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="form-group m-0">
                        <input class="form-control" name="DepartureDate" type="text" value="" placeholder="Check In" onfocus="(this.type='date')" onblur="if(!this.value)this.type='text'">
                    </div>
                    <span>
                        @if (ViewBag.FlightDepartureDateError != null)
                        {
                            <h4 class="text-danger ml-3">
                                @ViewBag.FlightDepartureDateError
                            </h4>
                        }
                        else
                        {
                            <br />
                        }
                    </span>
                </div>
                <div class="col-6">
                    <div class="form-group m-0">
                        <input class="form-control" name="ArrivalDate" type="text" value="" placeholder="Check Out" onfocus="(this.type='date')" onblur="if(!this.value)this.type='text'">
                    </div>
                    <span>
                        @if (ViewBag.FlightArrivalDateDateError != null)
                        {
                            <h4 class="text-danger ml-3">
                                @ViewBag.FlightArrivalDateDateError
                            </h4>
                        }
                        else
                        {
                            <br />
                        }
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group m-0">
                        <select class="" name="Class" style="height:50px">
                            <option>Class</option>
                            <option>Economy</option>
                            <option>Business</option>
                            <option>First Class</option>
                        </select>
                        <span>
                            @if (ViewBag.FlightClassError != null)
                            {
                                <h4 class="text-danger ml-3">
                                    @ViewBag.FlightClassError
                                </h4>
                            }
                            else
                            {
                                <br />
                            }
                        </span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group m-0">
                        <input class="form-control" name="Adults" value="" type="text" placeholder="Adults">
                    </div>
                    <span>
                        @if (ViewBag.FlightAdultsError != null)
                        {
                            <h4 class="text-danger ml-3">
                                @ViewBag.FlightAdultsError
                            </h4>
                        }
                        else
                        {
                            <br />
                        }
                    </span>
                </div>
                <div class="col-md-4">
                    <div class="form-group m-0">
                        <input class="form-control" name="Children" value="" type="text" placeholder="Children">
                    </div>
                    <span>
                        @if (ViewBag.FlightChildrenError != null)
                        {
                            <h4 class="text-danger ml-3">
                                @ViewBag.FlightChildrenError
                            </h4>
                        }
                        else
                        {
                            <br />
                        }
                    </span>
                </div>
            </div>
            <div class="form-btn">
                <button class="submit-btn" onclick="copyData()" type="submit">Check availability</button>

            </div>

        </div>
    </div>
</form>



<form asp-area="Flight" asp-controller="Flight" asp-action="AddFlightToPackage">
    <div class="d-flex justify-content-center">
        <div class="w-75 mt-5 shadow" style="background-color:rgba(26, 55, 77, 0.05);height:520px;border-radius:20px;position:relative;overflow:scroll">
            <div class="p-4 pl-5 position-sticky">
                <h2 class="section-title">Flights</h2>
            </div>
            <div class="position-relative overflow-scroll">
                <div class="pl-5 pr-5 list-group">
                    @{
                        @if (Model == null)
                        {
                            <h1>No Flight is Available</h1>
                        }
                        else
                        {
                            @foreach (DataRow dr in Model.Rows)
                            {

                                <div class="list-group-item" style="background-color:transparent;">
                                    <div class="row">
                                        <div class="p-3"><img height="70px" width="100px" src=@dr["Photo"] /></div>
                                        <div class="col-2 pt-3">
                                            <h4>@dr["AirlineName"]</h4>
                                            <h5 class="text-muted">Airline</h5>
                                        </div>
                                        <div class="col-2 pt-3">
                                            <h4> 1:25 AM To 4:50 AM</h4>
                                            <h5 class="text-muted">Duration</h5>
                                        </div>
                                        <div class="col-2 pt-3">
                                            <h4>@dr["Type"]</h4>
                                            <h5 class="text-muted">Type</h5>
                                        </div>
                                        <div class="col-2 pt-3">
                                            <h4> @dr["Class"]</h4>
                                            <h5 class="text-muted">Class</h5>
                                        </div>
                                        <div class="col-2 pt-3">
                                            <h4> Rs. @dr["Price"]</h4>
                                            <h5 class="text-muted">Price</h5>

                                        </div>
                                        <div>
                                            <input type="hidden" name="Children" value="" />
                                            <input type="hidden" name="Adults" value="" />

                                            <input type="hidden" name="FlightID" value="@dr["FlightID"]" />
                                            <button class="btn mt-5 btn-primary" type="submit">Book</button>
                                        </div>
                                    </div>
                                </div>
                            }

                        }
                    }



                </div>
            </div>
        </div>
    </div>
</form>

<script>
    // Fade out the success message after 5 seconds
    setTimeout(function () {
        $('.alert-success').fadeOut('slow');
    }, 5000); // 5000 milliseconds = 5 seconds
</script>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}


